<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="p5 Test">
<link rel="apple-touch-icon" href="favicon.png">
<link rel="icon" href="favicon.png" />
<title>p5.js 3D Box Test</title>
<style>
html,body{
  margin:0;
  padding:0;
  width:100vw;
  height:100vh;
  overflow:hidden;
  background:#111;
}
canvas{display:block;}
</style>

<!-- p5.js libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>

<script>
let overlay;

function setup() {
  createCanvas(windowWidth, windowHeight, WEBGL);

  // Create a separate 2D overlay
  overlay = createGraphics(windowWidth, windowHeight);
  overlay.clear(); // Make it transparent

  noStroke();
}

function draw() {
  background(20, 20, 40);

  // 3D box
  directionalLight(255, 255, 255, 0.25, 0.25, -1);
  ambientLight(60);
  rotateX(frameCount * 0.01 + (mouseY - height/2) * 0.002);
  rotateY(frameCount * 0.01 + (mouseX - width/2) * 0.002);
  normalMaterial();
  box(min(width, height) / 3);

  // Draw the 2D circle on overlay
  overlay.clear();
  overlay.fill(255, 100, 100);
  overlay.noStroke();
  overlay.ellipse(mouseX, mouseY, 40, 40);

  // Render overlay on top
  push();
  resetMatrix(); // Ignore WEBGL transformations
  imageMode(CORNER);
  image(overlay, -width/2, -height/2);
  pop();
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
  overlay.resizeCanvas(windowWidth, windowHeight);
}
</script>
</head>
<body></body>
</html>
